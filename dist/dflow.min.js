// Software: dflow
// Homepage: http://g14n.info/dflow
// License: MIT
require=function n(t,e,r){function o(u,f){if(!e[u]){if(!t[u]){var c="function"==typeof require&&require;if(!f&&c)return c(u,!0);if(i)return i(u,!0);var a=new Error("Cannot find module '"+u+"'");throw a.code="MODULE_NOT_FOUND",a}var s=e[u]={exports:{}};t[u][0].call(s.exports,function(n){var e=t[u][1][n];return o(e?e:n)},s,s.exports,n,t,e,r)}return e[u].exports}for(var i="function"==typeof require&&require,u=0;u<r.length;u++)o(r[u]);return o}({1:[function(n,t,e){t.exports=function(n){return"undefined"==typeof n||null===n}},{}],2:[function(n,t,e){function r(n,t){function e(e){var o=n.func[e],i="/"+e;G[i]=r(o,t)}function O(n,t){return h(q[n])&&(q[n]=D(n)),h(q[t])&&(q[t]=D(t)),q[n]-q[t]}function T(n){return!g.test(A[n])}function N(t){var e=A[t];if(!(k.indexOf(e)>-1)){var r="Task not compiled: "+e+" ["+t+"]";if(j.test(e)){var o=e.substring(1);if(h(n.func[o])){var i=new Error(r);throw i.taskKey=t,i.taskName=e,i}}else if(!b.exec(e)&&!x.func.test(e)&&!x.attr.test(e)&&!m(e)&&h(G[e])){var u=new Error(r);throw u.taskKey=t,u.taskName=e,u}}}function F(){function t(n){var t=w(o,$,n),i=A[n],u=G[i];if(!r){if("return"===i&&!r)return e=t[0],void(r=!0);if(h(u)){var f=new Error("Task not found: "+i+" ["+n+"] ");f.taskKey=n,f.taskName=i}try{o[n]=u.apply(null,t)}catch(t){throw t.taskName=i,t.taskKey=n,t}}}var e,r=!1,o={};return G.this=function(){return F},G["this.graph"]=function(){return n},u(G,A,arguments),Object.keys(A).filter(T).sort(O).forEach(t),e}try{E(n,t)}catch(n){throw n}var K=n.func||{},$=n.pipe,A=n.task,q={},D=v.bind(null,$,q),G=o;return G["dflow.fun"]=r,G["dflow.isDflowFun"]=y,G["dflow.validate"]=E,c(G,n),i(G,t),a(G,A),s(G,A),d(G,A),p(G,A),l(G,A),f(G,A),Object.keys(K).forEach(e),Object.keys(A).filter(T).forEach(N),F.graph=n,F}var o=n("./functions/builtin"),i=n("./inject/additionalFunctions"),u=n("./inject/arguments"),f=n("./inject/arrowFunctions"),c=n("./inject/accessors"),a=n("./inject/dotOperators"),s=n("./inject/globals"),p=n("./inject/numbers"),d=n("./inject/references"),l=n("./inject/strings"),w=n("./inputArgs"),y=n("./isDflowFun"),v=n("./level"),h=n("not-defined"),b=n("./regex/argument"),g=n("./regex/comment"),x=n("./regex/dotOperator"),j=n("./regex/subgraph"),k=n("./reservedKeys"),E=n("./validate"),m=n("./walkGlobal");t.exports=r},{"./functions/builtin":3,"./inject/accessors":5,"./inject/additionalFunctions":6,"./inject/arguments":7,"./inject/arrowFunctions":8,"./inject/dotOperators":9,"./inject/globals":10,"./inject/numbers":11,"./inject/references":12,"./inject/strings":13,"./inputArgs":14,"./isDflowFun":16,"./level":17,"./regex/argument":20,"./regex/comment":21,"./regex/dotOperator":22,"./regex/subgraph":25,"./reservedKeys":26,"./validate":27,"./walkGlobal":28,"not-defined":1}],3:[function(n,t,e){var r=n("not-defined");e["+"]=function(n,t){return n+t},e["*"]=function(n,t){return n*t},e["-"]=function(n,t){return n-t},e["/"]=function(n,t){return n/t},e["%"]=function(n,t){return n%t},e["&&"]=function(n,t){return n&&t},e["||"]=function(n,t){return n||t},e["!"]=function(n){return!n},e["==="]=function(n,t){return n===t},e["!=="]=function(n,t){return n!==t},e[">"]=function(n,t){return n>t},e["<"]=function(n,t){return n<t},e[">="]=function(n,t){return n>=t},e["<="]=function(n,t){return n<=t},e.apply=function(n,t,e){if(!r(n))return n.apply(t,e)},e["."]=function(n,t){if(!r(n)&&!r(t))return n[t]},e["="]=function(n,t){if(!r(n))return n=t},e["=="]=function(n,t){return n==t},e["==="]=function(n,t){return n===t},e.typeof=function(n){return typeof n},e.new=function(n,t,e,o,i,u){if(!r(n)){var f=arguments.length-1;return 0===f?new n:1===f?new n(t):2===f?new n(t,e):3===f?new n(t,e,o):4===f?new n(t,e,o,i):5===f?new n(t,e,o,i,u):void 0}},e["[]"]=function(){return[]},e["console.error"]=console.error.bind(console),e["console.log"]=console.log.bind(console),e.Infinity=function(){return 1/0},e.NaN=function(){return NaN},e.null=function(){return null},e["{}"]=function(){return{}},e.false=function(){return!1},e.true=function(){return!0},e.now=function(){return new Date}},{"not-defined":1}],4:[function(n,t,e){e.document=function(){return document},e.body=function(){return document.body},e.head=function(){return document.head},e.window=function(){return window},e.AudioContext=function(){return window.AudioContext||window.webkitAudioContext},e.innerHTML=function(n,t){return n.innerHTML=t,n}},{}],5:[function(n,t,e){function r(n,t){function e(e){function r(){return 1===arguments.length&&(t.data[o]=arguments[0]),t.data[o]}var o=null,u=t.task[e];i.test(u)&&(o=u.substring(1),n[u]=r)}o(t.data)&&(t.data={}),n["this.graph.data"]=function(){return t.data},Object.keys(t.task).forEach(e)}var o=n("not-defined"),i=n("../regex/accessor");t.exports=r},{"../regex/accessor":19,"not-defined":1}],6:[function(n,t,e){function r(n,t){function e(e){var r="function"==typeof t[e];r&&(n[e]=t[e])}o(t)||Object.keys(t).forEach(e)}var o=n("not-defined");t.exports=r},{"not-defined":1}],7:[function(n,t,e){function r(n,t,e){function r(n){return e[n]}function i(i){var u=t[i];if("arguments"===u)n[u]=function(){return e};else{var f=o.exec(u);f&&(n[u]=r.bind(null,f[1]))}}Object.keys(t).forEach(i)}var o=n("../regex/argument");t.exports=r},{"../regex/argument":20}],8:[function(require,module,exports){function arrowFunctions(funcs,task){function arrows(n){return task[n].indexOf("=>")>-1}function evalTask(taskKey){var taskName=task[taskKey];try{var f=eval(taskName);funcs[taskName]=f}catch(n){}}Object.keys(task).filter(arrows).forEach(evalTask)}module.exports=arrowFunctions},{}],9:[function(n,t,e){function r(n,t){function e(e){function r(n,t){var e;if(t&&(e=t[n]),"function"==typeof e)return e.apply(t,Array.prototype.slice.call(arguments,2))}function i(n,t){var e;return t&&(e=t[n]),"function"==typeof e?e.bind(t):e}var u=t[e];if(o.func.test(u)){var f=u.substring(1,u.length-2);n[u]=r.bind(null,f)}o.attr.test(u)&&(f=u.substring(1),n[u]=i.bind(null,f))}Object.keys(t).forEach(e)}var o=n("../regex/dotOperator");t.exports=r},{"../regex/dotOperator":22}],10:[function(n,t,e){function r(n,t){function e(e){var r=t[e];if("function"!=typeof n[r]&&!(i.indexOf(r)>-1)){var f=u(r);o(f)||("function"==typeof f?n[r]=f:n[r]=function(){return f})}}Object.keys(t).forEach(e)}var o=n("not-defined"),i=n("../reservedKeys"),u=n("../walkGlobal");t.exports=r},{"../reservedKeys":26,"../walkGlobal":28,"not-defined":1}],11:[function(n,t,e){function r(n,t){function e(e){var r=t[e],o=parseFloat(r);isNaN(o)||(n[r]=function(){return o})}Object.keys(t).forEach(e)}t.exports=r},{}],12:[function(n,t,e){function r(n,t){function e(e){function r(){return f}var u=null,f=null,c=t[e];o.test(c)&&(u=c.substring(1),f="function"==typeof n[u]?n[u]:i(u),"function"==typeof f&&(n[c]=r))}Object.keys(t).forEach(e)}var o=n("../regex/reference"),i=n("../walkGlobal");t.exports=r},{"../regex/reference":24,"../walkGlobal":28}],13:[function(n,t,e){function r(n,t){function e(e){var r=t[e];o.test(r)&&(n[r]=function(){return r.substr(1,r.length-2)})}Object.keys(t).forEach(e)}var o=n("../regex/quoted");t.exports=r},{"../regex/quoted":23}],14:[function(n,t,e){function r(n,t,e){function r(t){var e=t[2]||0,r=n[t[0]];i[e]=r}var i=[],u=o.bind(null,t);return u(e).forEach(r),i}var o=n("./inputPipes");t.exports=r},{"./inputPipes":15}],15:[function(n,t,e){function r(n,t){function e(t){o.push(n[t])}function r(e){return n[e][1]===t}var o=[];return Object.keys(n).filter(r).forEach(e),o}t.exports=r},{}],16:[function(n,t,e){function r(n){var t="function"==typeof n,e="object"==typeof n.graph,r="object"==typeof n.funcs,i=!0;if(t&&e&&r)try{o(n.graph,n.funcs)}catch(n){i=!1}return i}var o=n("./validate");t.exports=r},{"./validate":27}],17:[function(n,t,e){function r(n,t,e){function i(e){u=Math.max(u,r(n,t,e)+1)}var u=0,f=o.bind(null,n);return"number"==typeof t[e]?t[e]:(f(e).forEach(i),t[e]=u,u)}var o=n("./parents");t.exports=r},{"./parents":18}],18:[function(n,t,e){function r(n,t){function e(n){i.push(n[0])}var r=o.bind(null,n),i=[];return r(t).forEach(e),i}var o=n("./inputPipes");t.exports=r},{"./inputPipes":15}],19:[function(n,t,e){t.exports=/^@[\w][\w\d]+$/},{}],20:[function(n,t,e){t.exports=/^arguments\[(\d+)\]$/},{}],21:[function(n,t,e){t.exports=/^\/\/.+$/},{}],22:[function(n,t,e){e.attr=/^\.([a-zA-Z_$][0-9a-zA-Z_$]+)$/,e.func=/^\.([a-zA-Z_$][0-9a-zA-Z_$]+)\(\)$/},{}],23:[function(n,t,e){t.exports=/^'.+'$/},{}],24:[function(n,t,e){t.exports=/^&(.+)$/},{}],25:[function(n,t,e){t.exports=/^\/[\w][\w\d]+$/},{}],26:[function(n,t,e){t.exports=["arguments","dflow.fun","dflow.isDflowFun","dflow.validate","return","this","this.graph"]},{}],27:[function(n,t,e){function r(n,t){function e(n,t){if(n===t)throw new TypeError("Reserved function name: "+n)}function p(n){var t=y[n][2]||0,e=y[n][0],r=y[n][1];if("number"!=typeof t)throw new TypeError("Invalid pipe: "+y[n]);if("string"!=typeof e)throw new TypeError("Invalid pipe: "+y[n]);if("string"!=typeof r)throw new TypeError("Invalid pipe: "+y[n]);if(o(v[e]))throw new Error("Orphan pipe: "+y[n]);if(o(v[r]))throw new Error("Orphan pipe: "+y[n]);if(o(x[e])&&(x[e]={}),o(x[e][r])&&(x[e][r]=[]),!o(x[e][r][t]))throw new Error("Duplicated pipe: "+y[n]);x[e][r][t]=!0}function d(n){var t=v[n];return s.test(t)}function l(n){var t=v[n],e=t.substring(1);if(o(b[e]))throw new Error("Undefined subgraph: "+e)}function w(n){r(b[n],t)}var y=n.pipe,v=n.task,h=n.data||{},b=n.func||{},g=n.info||{},x={};if("object"==typeof t)for(var j in t){var k=e.bind(null,j);if(a.forEach(k),u.test(j))throw new TypeError("Reserved function name: "+j);if(i.test(j))throw new TypeError('Function name cannot start with "@": '+j);if(f.attr.test(j))throw new TypeError('Function name cannot start with ".":'+j);if(f.func.test(j))throw new TypeError('Function name cannot start with "." and end with "()":'+j);if(c.test(j))throw new TypeError('Function name cannot start with "&": '+j)}if("object"!=typeof y)throw new TypeError("Not an object: pipe "+y);if("object"!=typeof v)throw new TypeError("Not an object: task "+v);if("object"!=typeof h)throw new TypeError("Not an object: data "+h);if("object"!=typeof b)throw new TypeError("Not an object: func "+b);if("object"!=typeof g)throw new TypeError("Not an object: info "+g);return Object.keys(y).forEach(p),Object.keys(v).filter(d).forEach(l),"object"==typeof b&&Object.keys(b).forEach(w),!0}var o=n("not-defined"),i=n("./regex/accessor"),u=n("./regex/argument"),f=n("./regex/dotOperator"),c=n("./regex/reference"),a=n("./reservedKeys"),s=n("./regex/subgraph");t.exports=r},{"./regex/accessor":19,"./regex/argument":20,"./regex/dotOperator":22,"./regex/reference":24,"./regex/subgraph":25,"./reservedKeys":26,"not-defined":1}],28:[function(n,t,e){(function(n){function e(n){function t(n,t){return n[t]}if(0!==n.indexOf("."))return n.split(".").reduce(t,r)}var r;"object"==typeof window&&(r=window),"object"==typeof n&&(r=n),t.exports=e}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],dflow:[function(n,t,e){function r(n){function t(n){e[n]=o[n]}var e=arguments[1]||{};return Object.keys(o).forEach(t),i(n,e)}var o=n("../functions/window"),i=n("../fun");e.fun=r},{"../fun":2,"../functions/window":4}]},{},[]);
//# sourceMappingURL=dflow.map