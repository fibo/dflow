// Software: dflow
// Homepage: http://g14n.info/dflow
// License: MIT
require=function n(e,t,r){function o(u,f){if(!t[u]){if(!e[u]){var c="function"==typeof require&&require;if(!f&&c)return c(u,!0);if(i)return i(u,!0);var a=new Error("Cannot find module '"+u+"'");throw a.code="MODULE_NOT_FOUND",a}var s=t[u]={exports:{}};e[u][0].call(s.exports,function(n){var t=e[u][1][n];return o(t?t:n)},s,s.exports,n,e,t,r)}return t[u].exports}for(var i="function"==typeof require&&require,u=0;u<r.length;u++)o(r[u]);return o}({1:[function(n,e,t){e.exports=function(n){return"undefined"==typeof n||null===n}},{}],2:[function(n,e,t){function r(n,e){function t(t){var o=n.func[t],i="/"+t;_[i]=r(o,e)}function T(n,e){return v(C[n])&&(C[n]=D(n)),v(C[e])&&(C[e]=D(e)),C[n]-C[e]}function N(n){return!b.test(q[n])}function F(e){var t=q[e];if(!(j.indexOf(t)>-1)){var r="Task not compiled: "+t+" ["+e+"]";if(E.test(t)){var o=t.substring(1);if(v(n.func[o])){var i=new Error(r);throw i.taskKey=e,i.taskName=t,i}}else if(!g.exec(t)&&!x.func.test(t)&&!x.attrRead.test(t)&&!x.attrWrite.test(t)&&!m.exec(t)&&!O(t)&&v(_[t])){var u=new Error(r);throw u.taskKey=e,u.taskName=t,u}}}function $(){function e(n){var e=w(o,K,n),i=q[n],u=_[i];if(!r){if("return"===i&&!r)return t=e[0],void(r=!0);if(v(u)){var f=new Error("Task not found: "+i+" ["+n+"] ");f.taskKey=n,f.taskName=i}try{o[n]=u.apply(null,e)}catch(e){throw e.taskName=i,e.taskKey=n,e}}}var t,r=!1,o={};return _.this=function(){return $},_["this.graph"]=function(){return n},u(_,q,arguments),Object.keys(q).filter(N).sort(T).forEach(e),t}try{k(n,e)}catch(n){throw n}var A=n.func||{},K=n.pipe,q=n.task,C={},D=y.bind(null,K,C),_=o;return _["dflow.fun"]=r,_["dflow.isDflowFun"]=h,_["dflow.validate"]=k,c(_,n),i(_,e),a(_,q),s(_,q),p(_,q),l(_,q),d(_,q),f(_,q),Object.keys(A).forEach(t),Object.keys(q).filter(N).forEach(F),$.graph=n,$}var o=n("./functions/builtin"),i=n("./inject/additionalFunctions"),u=n("./inject/arguments"),f=n("./inject/arrowFunctions"),c=n("./inject/accessors"),a=n("./inject/dotOperators"),s=n("./inject/globals"),d=n("./inject/numbers"),p=n("./inject/references"),l=n("./inject/strings"),w=n("./inputArgs"),h=n("./isDflowFun"),y=n("./level"),v=n("not-defined"),g=n("./regex/argument"),b=n("./regex/comment"),x=n("./regex/dotOperator"),m=n("./regex/reference"),E=n("./regex/subgraph"),j=n("./reservedKeys"),k=n("./validate"),O=n("./walkGlobal");e.exports=r},{"./functions/builtin":3,"./inject/accessors":5,"./inject/additionalFunctions":6,"./inject/arguments":7,"./inject/arrowFunctions":8,"./inject/dotOperators":9,"./inject/globals":10,"./inject/numbers":11,"./inject/references":12,"./inject/strings":13,"./inputArgs":14,"./isDflowFun":16,"./level":17,"./regex/argument":20,"./regex/comment":21,"./regex/dotOperator":22,"./regex/reference":24,"./regex/subgraph":25,"./reservedKeys":26,"./validate":27,"./walkGlobal":28,"not-defined":1}],3:[function(n,e,t){var r=n("not-defined");t["+"]=function(n,e){return n+e},t["*"]=function(n,e){return n*e},t["-"]=function(n,e){return n-e},t["/"]=function(n,e){return n/e},t["%"]=function(n,e){return n%e},t["&&"]=function(n,e){return n&&e},t["||"]=function(n,e){return n||e},t["!"]=function(n){return!n},t["==="]=function(n,e){return n===e},t["!=="]=function(n,e){return n!==e},t[">"]=function(n,e){return n>e},t["<"]=function(n,e){return n<e},t[">="]=function(n,e){return n>=e},t["<="]=function(n,e){return n<=e},t.apply=function(n,e,t){if(!r(n))return n.apply(e,t)},t["."]=function(n,e){if(!r(n)&&!r(e))return n[e]},t["="]=function(n,e){if(!r(n))return n=e},t["=="]=function(n,e){return n==e},t["==="]=function(n,e){return n===e},t.typeof=function(n){return typeof n},t.new=function(n,e,t,o,i,u){if(!r(n)){var f=arguments.length-1;return 0===f?new n:1===f?new n(e):2===f?new n(e,t):3===f?new n(e,t,o):4===f?new n(e,t,o,i):5===f?new n(e,t,o,i,u):void 0}},t["[]"]=function(){return[]},t["console.error"]=console.error.bind(console),t["console.log"]=console.log.bind(console),t.Infinity=function(){return 1/0},t.NaN=function(){return NaN},t.null=function(){return null},t["{}"]=function(){return{}},t.false=function(){return!1},t.true=function(){return!0},t.now=function(){return new Date}},{"not-defined":1}],4:[function(n,e,t){function r(){if(u)return u;var n=window.AudioContext||window.webkitAudioContext;return u=new n}function o(){return["a","article","aside","button","form","div","h1","h2","h3","h4","h5","input","label","li","link","ol","nav","p","script","svg","textarea","ul"]}var i=n("not-defined"),u=null;t.audioContext=r,t.appendChild=function(n,e){var t=["body","head"];if(!(arguments.length<2)){t.forEach(function(n){if(e===document[n])throw new Error("cannot erase "+n)}),Array.prototype.slice.call(arguments).forEach(function(n){if("function"!=typeof n.appendChild)throw new Error("Cannot appendChild, not an element:"+n)});var r=e.id;if(!i(r)){var o=document.getElementById(r);return o?o:n.appendChild(e)}}},t.body=function(){return document.body},t.document=function(){return document},t.head=function(){return document.head},t.availableTags=o,o().forEach(function(n){t[n]=function(e){var t;if(e&&"string"!=typeof e)throw new TypeError("Element id must be a string:"+e);return t=document.getElementById(e),t||(t=document.createElement(n),t.id=e),t}}),t.window=function(){return window}},{"not-defined":1}],5:[function(n,e,t){function r(n,e){function t(t){function r(){return 1===arguments.length&&(e.data[o]=arguments[0]),e.data[o]}var o=null,u=e.task[t];i.test(u)&&(o=u.substring(1),n[u]=r)}o(e.data)&&(e.data={}),n["this.graph.data"]=function(){return e.data},Object.keys(e.task).forEach(t)}var o=n("not-defined"),i=n("../regex/accessor");e.exports=r},{"../regex/accessor":19,"not-defined":1}],6:[function(n,e,t){function r(n,e){function t(t){var r="function"==typeof e[t];r&&(n[t]=e[t])}o(e)||Object.keys(e).forEach(t)}var o=n("not-defined");e.exports=r},{"not-defined":1}],7:[function(n,e,t){function r(n,e,t){function r(n){return t[n]}function i(i){var u=e[i];if("arguments"===u)n[u]=function(){return t};else{var f=o.exec(u);f&&(n[u]=r.bind(null,f[1]))}}Object.keys(e).forEach(i)}var o=n("../regex/argument");e.exports=r},{"../regex/argument":20}],8:[function(require,module,exports){function arrowFunctions(funcs,task){function arrows(n){return task[n].indexOf("=>")>-1}function evalTask(taskKey){var taskName=task[taskKey];try{var f=eval(taskName);funcs[taskName]=f}catch(n){}}Object.keys(task).filter(arrows).forEach(evalTask)}module.exports=arrowFunctions},{}],9:[function(n,e,t){function r(n,e){function t(t){function r(n,e){var t;if(e&&(t=e[n]),"function"==typeof t)return t.apply(e,Array.prototype.slice.call(arguments,2))}function u(n,e,t){if(!o(e))return e[n]=t,e}function f(n,e){var t;return e&&(t=e[n]),"function"==typeof t?t.bind(e):t}var c=e[t];i.func.test(c)&&(n[c]=r.bind(null,c.substring(1,c.length-2))),i.attrWrite.test(c)&&(n[c]=u.bind(null,c.substring(1,c.length-1))),i.attrRead.test(c)&&(n[c]=f.bind(null,c.substring(1)))}Object.keys(e).forEach(t)}var o=n("not-defined"),i=n("../regex/dotOperator");e.exports=r},{"../regex/dotOperator":22,"not-defined":1}],10:[function(n,e,t){function r(n,e){function t(t){var r=e[t];if("function"!=typeof n[r]&&!(i.indexOf(r)>-1)){var f=u(r);o(f)||("function"==typeof f?n[r]=f:n[r]=function(){return f})}}Object.keys(e).forEach(t)}var o=n("not-defined"),i=n("../reservedKeys"),u=n("../walkGlobal");e.exports=r},{"../reservedKeys":26,"../walkGlobal":28,"not-defined":1}],11:[function(n,e,t){function r(n,e){function t(t){var r=e[t],o=parseFloat(r);isNaN(o)||(n[r]=function(){return o})}Object.keys(e).forEach(t)}e.exports=r},{}],12:[function(n,e,t){function r(n,e){function t(t){function r(){return f}var u=null,f=null,c=e[t];o.test(c)&&(u=c.substring(1),f="function"==typeof n[u]?n[u]:i(u),"function"==typeof f&&(n[c]=r))}Object.keys(e).forEach(t)}var o=n("../regex/reference"),i=n("../walkGlobal");e.exports=r},{"../regex/reference":24,"../walkGlobal":28}],13:[function(n,e,t){function r(n,e){function t(t){var r=e[t];o.test(r)&&(n[r]=function(){return r.substr(1,r.length-2)})}Object.keys(e).forEach(t)}var o=n("../regex/quoted");e.exports=r},{"../regex/quoted":23}],14:[function(n,e,t){function r(n,e,t){function r(e){var t=e[2]||0,r=n[e[0]];i[t]=r}var i=[],u=o.bind(null,e);return u(t).forEach(r),i}var o=n("./inputPipes");e.exports=r},{"./inputPipes":15}],15:[function(n,e,t){function r(n,e){function t(e){o.push(n[e])}function r(t){return n[t][1]===e}var o=[];return Object.keys(n).filter(r).forEach(t),o}e.exports=r},{}],16:[function(n,e,t){function r(n){var e="function"==typeof n,t="object"==typeof n.graph,r="object"==typeof n.funcs,i=!0;if(e&&t&&r)try{o(n.graph,n.funcs)}catch(n){i=!1}return i}var o=n("./validate");e.exports=r},{"./validate":27}],17:[function(n,e,t){function r(n,e,t){function i(t){u=Math.max(u,r(n,e,t)+1)}var u=0,f=o.bind(null,n);return"number"==typeof e[t]?e[t]:(f(t).forEach(i),e[t]=u,u)}var o=n("./parents");e.exports=r},{"./parents":18}],18:[function(n,e,t){function r(n,e){function t(n){i.push(n[0])}var r=o.bind(null,n),i=[];return r(e).forEach(t),i}var o=n("./inputPipes");e.exports=r},{"./inputPipes":15}],19:[function(n,e,t){e.exports=/^@[\w][\w\d]+$/},{}],20:[function(n,e,t){e.exports=/^arguments\[(\d+)]$/},{}],21:[function(n,e,t){e.exports=/^\/\/.+$/},{}],22:[function(n,e,t){t.attrRead=/^\.([a-zA-Z_$][0-9a-zA-Z_$]+)$/,t.attrWrite=/^\.([a-zA-Z_$][0-9a-zA-Z_$]+)=$/,t.func=/^\.([a-zA-Z_$][0-9a-zA-Z_$]+)\(\)$/},{}],23:[function(n,e,t){e.exports=/^'.+'$/},{}],24:[function(n,e,t){e.exports=/^&(.+)$/},{}],25:[function(n,e,t){e.exports=/^\/[\w][\w\d]+$/},{}],26:[function(n,e,t){e.exports=["arguments","dflow.fun","dflow.isDflowFun","dflow.validate","return","this","this.graph"]},{}],27:[function(n,e,t){function r(n,e){function t(n,e){if(n===e)throw new TypeError("Reserved function name: "+n)}function d(n){var e=h[n][2]||0,t=h[n][0],r=h[n][1];if("number"!=typeof e)throw new TypeError("Invalid pipe: "+h[n]);if("string"!=typeof t)throw new TypeError("Invalid pipe: "+h[n]);if("string"!=typeof r)throw new TypeError("Invalid pipe: "+h[n]);if(o(y[t]))throw new Error("Orphan pipe: "+h[n]);if(o(y[r]))throw new Error("Orphan pipe: "+h[n]);if(o(x[t])&&(x[t]={}),o(x[t][r])&&(x[t][r]=[]),!o(x[t][r][e]))throw new Error("Duplicated pipe: "+h[n]);x[t][r][e]=!0}function p(n){var e=y[n];return s.test(e)}function l(n){var e=y[n],t=e.substring(1);if(o(g[t]))throw new Error("Undefined subgraph: "+t)}function w(n){r(g[n],e)}var h=n.pipe,y=n.task,v=n.data||{},g=n.func||{},b=n.info||{},x={};if("object"==typeof e)for(var m in e){var E=t.bind(null,m);if(a.forEach(E),u.test(m))throw new TypeError("Reserved function name: "+m);if(i.test(m))throw new TypeError('Function name cannot start with "@": '+m);if(f.attrRead.test(m))throw new TypeError('Function name cannot start with ".":'+m);if(f.attrWrite.test(m))throw new TypeError('Function name cannot start with "." and end with "=":'+m);if(f.func.test(m))throw new TypeError('Function name cannot start with "." and end with "()":'+m);if(c.test(m))throw new TypeError('Function name cannot start with "&": '+m)}if("object"!=typeof h)throw new TypeError("Not an object: pipe "+h);if("object"!=typeof y)throw new TypeError("Not an object: task "+y);if("object"!=typeof v)throw new TypeError("Not an object: data "+v);if("object"!=typeof g)throw new TypeError("Not an object: func "+g);if("object"!=typeof b)throw new TypeError("Not an object: info "+b);return Object.keys(h).forEach(d),Object.keys(y).filter(p).forEach(l),"object"==typeof g&&Object.keys(g).forEach(w),!0}var o=n("not-defined"),i=n("./regex/accessor"),u=n("./regex/argument"),f=n("./regex/dotOperator"),c=n("./regex/reference"),a=n("./reservedKeys"),s=n("./regex/subgraph");e.exports=r},{"./regex/accessor":19,"./regex/argument":20,"./regex/dotOperator":22,"./regex/reference":24,"./regex/subgraph":25,"./reservedKeys":26,"not-defined":1}],28:[function(n,e,t){(function(t){function r(n){function e(n,e){return n[e]}if(0!==n.indexOf(".")&&!(i.test(n)||parseFloat(n)||f.test(n)||u.test(n)))return n.split(".").reduce(e,o)}var o,i=n("./regex/comment"),u=n("./regex/reference"),f=n("./regex/quoted");"object"==typeof window&&(o=window),"object"==typeof t&&(o=t),e.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./regex/comment":21,"./regex/quoted":23,"./regex/reference":24}],dflow:[function(n,e,t){function r(n){function e(n){t[n]=o[n]}var t=arguments[1]||{};return Object.keys(o).forEach(e),i(n,t)}var o=n("../functions/window"),i=n("../fun");t.fun=r},{"../fun":2,"../functions/window":4}]},{},[]);
//# sourceMappingURL=dflow.map