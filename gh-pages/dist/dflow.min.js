// dflow.js http://g14n.info/dflow 
// license MIT
require=function n(e,t,r){function o(u,f){if(!t[u]){if(!e[u]){var c="function"==typeof require&&require;if(!f&&c)return c(u,!0);if(i)return i(u,!0);var a=new Error("Cannot find module '"+u+"'");throw a.code="MODULE_NOT_FOUND",a}var s=t[u]={exports:{}};e[u][0].call(s.exports,function(n){var t=e[u][1][n];return o(t?t:n)},s,s.exports,n,e,t,r)}return t[u].exports}for(var i="function"==typeof require&&require,u=0;u<r.length;u++)o(r[u]);return o}({1:[function(n,e,t){e.exports=function(n){return"undefined"==typeof n}},{}],2:[function(n,e,t){function r(n,e){function t(t){var o=n.func[t],i="/"+t;I[i]=r(o,e)}function O(n,e){return"undefined"==typeof q[n]&&(q[n]=G(n)),"undefined"==typeof q[e]&&(q[e]=G(e)),q[n]-q[e]}function k(n){return!g.test(D[n])}function T(e){var t=D[e];if(!(x.indexOf(t)>-1)){var r="Task not found: "+t+" ["+e+"]";if(v.test(t)){var o=t.substring(1);if(h(n.func[o]))throw new Error(r)}else if(!b.exec(t)&&!m(E(t))&&h(I[t]))throw new Error(r)}}function N(){function e(n){var e=i(n),u=D[n],f=I[u];if(!r){if("return"===u&&!r)return t=e[0],void(r=!0);if("undefined"==typeof f)throw new Error("Task not found: "+u+" ["+n+"] ");try{o[n]=f.apply(null,e)}catch(c){throw c}}}var t,r=!1,o={},i=l.bind(null,o,A);return I["this"]=function(){return N},I["this.graph"]=function(){return n},u(I,D,arguments),Object.keys(D).filter(k).sort(O).forEach(e),t}try{j(n,e)}catch(F){throw F}var $=n.func||{},A=n.pipe,D=n.task,q={},G=y.bind(null,A,q),I=o;return I["dflow.fun"]=r,I["dflow.isDflowFun"]=w,I["dflow.validate"]=j,f(I,n),i(I,e),c(I,D),a(I,D),p(I,D),s(I,D),d(I,D),Object.keys($).forEach(t),Object.keys(D).filter(k).forEach(T),N.graph=n,N}var o=n("./functions/builtin"),i=n("./inject/additionalFunctions"),u=n("./inject/arguments"),f=n("./inject/accessors"),c=n("./inject/dotOperators"),a=n("./inject/globals"),s=n("./inject/numbers"),p=n("./inject/references"),d=n("./inject/strings"),l=n("./inputArgs"),w=n("./isDflowFun"),y=n("./level"),h=n("not-defined"),b=n("./regex/argument"),g=n("./regex/comment"),v=n("./regex/subgraph"),x=n("./reservedKeys"),j=n("./validate"),E=n("./walkGlobal"),m=function(n){return!h(n)};e.exports=r},{"./functions/builtin":3,"./inject/accessors":5,"./inject/additionalFunctions":6,"./inject/arguments":7,"./inject/dotOperators":8,"./inject/globals":9,"./inject/numbers":10,"./inject/references":11,"./inject/strings":12,"./inputArgs":13,"./isDflowFun":15,"./level":16,"./regex/argument":19,"./regex/comment":20,"./regex/subgraph":24,"./reservedKeys":25,"./validate":26,"./walkGlobal":27,"not-defined":1}],3:[function(n,e,t){t["+"]=function(n,e){return n+e},t["*"]=function(n,e){return n*e},t["-"]=function(n,e){return n-e},t["/"]=function(n,e){return n/e},t["%"]=function(n,e){return n%e},t["&&"]=function(n,e){return n&&e},t["||"]=function(n,e){return n||e},t["!"]=function(n){return!n},t["==="]=function(n,e){return n===e},t["!=="]=function(n,e){return n!==e},t[">"]=function(n,e){return n>e},t["<"]=function(n,e){return e>n},t[">="]=function(n,e){return n>=e},t["<="]=function(n,e){return e>=n},t.apply=function(n,e,t){return n.apply(e,t)},t["."]=function(n,e){return n[e]},t["typeof"]=function(n){return typeof n},t["new"]=function(){var n=arguments[0],e=arguments[1],t=arguments[2],r=arguments[3],o=arguments[4],i=arguments[5],u=arguments.length-1;return 0===u?new n:1===u?new n(e):2===u?new n(e,t):3===u?new n(e,t,r):4===u?new n(e,t,r,o):5===u?new n(e,t,r,o,i):void 0},t["[]"]=function(){return[]},t.indexOf=function(n,e){return n.indexOf(e)},t.push=function(n,e){return n.push(e)},t.pop=function(n,e){return n.pop(e)},t["console.error"]=console.error.bind(console),t["console.log"]=console.log.bind(console),t.Infinity=function(){return 1/0},t.NaN=function(){return NaN},t["null"]=function(){return null},t["{}"]=function(){return{}},t["false"]=function(){return!1},t["true"]=function(){return!0},t.now=function(){return new Date}},{}],4:[function(n,e,t){t.document=function(){return document},t.body=function(){return document.body},t.head=function(){return document.head},t.window=function(){return window},t.AudioContext=function(){return window.AudioContext||window.webkitAudioContext},t.getElementById=function(n){return window.document.getElementById(n)},t.innerHTML=function(n,e){return n.innerHTML=e,n}},{}],5:[function(n,e,t){function r(n,e){function t(t){function r(){return 1===arguments.length&&(e.data[i]=arguments[0]),e.data[i]}var i=null,u=e.task[t];o.test(u)&&(i=u.substring(1),n[u]=r)}"undefined"==typeof e.data&&(e.data={}),n["this.graph.data"]=function(){return e.data},Object.keys(e.task).forEach(t)}var o=n("../regex/accessor");e.exports=r},{"../regex/accessor":18}],6:[function(n,e,t){function r(n,e){function t(t){var r="function"==typeof e[t];r&&(n[t]=e[t])}"undefined"!=typeof e&&Object.keys(e).forEach(t)}e.exports=r},{}],7:[function(n,e,t){function r(n,e,t){function r(n){return t[n]}function i(i){var u=e[i];if("arguments"===u)n[u]=function(){return t};else{var f=o.exec(u);f&&(n[u]=r.bind(null,f[1]))}}Object.keys(e).forEach(i)}var o=n("../regex/argument");e.exports=r},{"../regex/argument":19}],8:[function(n,e,t){function r(n,e){function t(t){function r(n,e){var t;return"object"==typeof e&&(t=e[n]),"function"==typeof t?t.apply(e,Array.prototype.slice.call(arguments,2)):void 0}function i(n,e){var t;return"object"==typeof e&&(t=e[n]),"function"==typeof t?t.bind(e):t}var u=e[t];if(o.func.test(u)){var f=u.substring(1,u.length-2);n[u]=r.bind(null,f)}o.attr.test(u)&&(f=u.substring(1),n[u]=i.bind(null,f))}Object.keys(e).forEach(t)}var o=n("../regex/dotOperator");e.exports=r},{"../regex/dotOperator":21}],9:[function(n,e,t){function r(n,e){function t(t){var r=e[t];if("function"!=typeof n[r]&&!(i.indexOf(r)>-1)){var f=u(r);o(f)||("function"==typeof f?n[r]=f:n[r]=function(){return f})}}Object.keys(e).forEach(t)}var o=n("not-defined"),i=n("../reservedKeys"),u=n("../walkGlobal");e.exports=r},{"../reservedKeys":25,"../walkGlobal":27,"not-defined":1}],10:[function(n,e,t){function r(n,e){function t(t){var r=e[t],o=parseFloat(r);isNaN(o)||(n[r]=function(){return o})}Object.keys(e).forEach(t)}e.exports=r},{}],11:[function(n,e,t){function r(n,e){function t(t){function r(){return f}var u=null,f=null,c=e[t];o.test(c)&&(u=c.substring(1),f="function"==typeof n[u]?n[u]:i(u),"function"==typeof f&&(n[c]=r))}Object.keys(e).forEach(t)}var o=n("../regex/reference"),i=n("../walkGlobal");e.exports=r},{"../regex/reference":23,"../walkGlobal":27}],12:[function(n,e,t){function r(n,e){function t(t){var r=e[t];o.test(r)&&(n[r]=function(){return r.substr(1,r.length-2)})}Object.keys(e).forEach(t)}var o=n("../regex/quoted");e.exports=r},{"../regex/quoted":22}],13:[function(n,e,t){function r(n,e,t){function r(e){var t=e[2]||0,r=n[e[0]];i[t]=r}var i=[],u=o.bind(null,e);return u(t).forEach(r),i}var o=n("./inputPipes");e.exports=r},{"./inputPipes":14}],14:[function(n,e,t){function r(n,e){function t(e){o.push(n[e])}function r(t){return n[t][1]===e}var o=[];return Object.keys(n).filter(r).forEach(t),o}e.exports=r},{}],15:[function(n,e,t){function r(n){var e="function"==typeof n,t="object"==typeof n.graph,r="object"==typeof n.funcs,i=!0;if(e&&t&&r)try{o(n.graph,n.funcs)}catch(u){i=!1}return i}var o=n("./validate");e.exports=r},{"./validate":26}],16:[function(n,e,t){function r(n,e,t){function i(t){u=Math.max(u,r(n,e,t)+1)}var u=0,f=o.bind(null,n);return"number"==typeof e[t]?e[t]:(f(t).forEach(i),e[t]=u,u)}var o=n("./parents");e.exports=r},{"./parents":17}],17:[function(n,e,t){function r(n,e){function t(n){i.push(n[0])}var r=o.bind(null,n),i=[];return r(e).forEach(t),i}var o=n("./inputPipes");e.exports=r},{"./inputPipes":14}],18:[function(n,e,t){e.exports=/^@[\w][\w\d]+$/},{}],19:[function(n,e,t){e.exports=/^arguments\[(\d+)\]$/},{}],20:[function(n,e,t){e.exports=/^\/\/.+$/},{}],21:[function(n,e,t){t.attr=/^\.([a-zA-Z_$][0-9a-zA-Z_$]+)$/,t.func=/^\.([a-zA-Z_$][0-9a-zA-Z_$]+)\(\)$/},{}],22:[function(n,e,t){e.exports=/^'.+'$/},{}],23:[function(n,e,t){e.exports=/^\&(.+)$/},{}],24:[function(n,e,t){e.exports=/^\/[\w][\w\d]+$/},{}],25:[function(n,e,t){e.exports=["arguments","dflow.fun","dflow.isDflowFun","dflow.validate","return","this","this.graph"]},{}],26:[function(n,e,t){function r(n,e){function t(n,e){if(n===e)throw new TypeError("Reserved function name: "+n)}function a(n){var e=l[n][2]||0,t=l[n][0],r=l[n][1];if("number"!=typeof e)throw new TypeError("Invalid pipe: "+l[n]);if("string"!=typeof t)throw new TypeError("Invalid pipe: "+l[n]);if("string"!=typeof r)throw new TypeError("Invalid pipe: "+l[n]);if("undefined"==typeof w[t])throw new Error("Orphan pipe: "+l[n]);if("undefined"==typeof w[r])throw new Error("Orphan pipe: "+l[n]);if("undefined"==typeof g[t]&&(g[t]={}),"undefined"==typeof g[t][r]&&(g[t][r]=[]),"undefined"!=typeof g[t][r][e])throw new Error("Duplicated pipe: "+l[n]);g[t][r][e]=!0}function s(n){var e=w[n];return c.test(e)}function p(n){var e=w[n],t=e.substring(1);if("undefined"==typeof h[t])throw new Error("Undefined subgraph: "+t)}function d(n){r(h[n],e)}var l=n.pipe,w=n.task,y=n.data||{},h=n.func||{},b=n.info||{},g={};if("object"==typeof e)for(var v in e){var x=["return","arguments","this","this.graph"],j=t.bind(null,v);if(x.forEach(j),i.test(v))throw new TypeError("Reserved function name: "+v);if(o.test(v))throw new TypeError('Function name cannot start with "@": '+v);if(u.attr.test(v))throw new TypeError('Function name cannot start with ".":'+v);if(u.func.test(v))throw new TypeError('Function name cannot start with "." and end with "()":'+v);if(f.test(v))throw new TypeError('Function name cannot start with "&": '+v)}if("object"!=typeof l)throw new TypeError("Not an object: pipe "+l);if("object"!=typeof w)throw new TypeError("Not an object: task "+w);if("object"!=typeof y)throw new TypeError("Not an object: data "+y);if("object"!=typeof h)throw new TypeError("Not an object: func "+h);if("object"!=typeof b)throw new TypeError("Not an object: info "+b);return Object.keys(l).forEach(a),Object.keys(w).filter(s).forEach(p),"object"==typeof h&&Object.keys(h).forEach(d),!0}var o=n("./regex/accessor"),i=n("./regex/argument"),u=n("./regex/dotOperator"),f=n("./regex/reference"),c=(n("./reservedKeys"),n("./regex/subgraph"));e.exports=r},{"./regex/accessor":18,"./regex/argument":19,"./regex/dotOperator":21,"./regex/reference":23,"./regex/subgraph":24,"./reservedKeys":25}],27:[function(n,e,t){(function(n){function t(n){function e(n,e){return n[e]}return n.split(".").reduce(e,r)}var r;"object"==typeof window&&(r=window),"object"==typeof n&&(r=n),e.exports=t}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],dflow:[function(n,e,t){function r(n){function e(n){t[n]=o[n]}var t=arguments[1]||{};return Object.keys(o).forEach(e),i(n,t)}var o=n("../functions/window"),i=n("../fun");t.fun=r},{"../fun":2,"../functions/window":4}]},{},[]);
//# sourceMappingURL=dflow.map