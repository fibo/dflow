<!DOCTYPE>
<html>
  <head>
    <title>dflow test</title>
    <script type="text/javascript" src="../dist/dflow.js"></script>
  </head>
  <body onload="dflowTest()">
    <p>The following content is generated by <a href="http://g14n.info/dflow">dflow</a>, client side. Source code is available <a href="https://github.com/fibo/dflow/blob/master/gh-pages/test/page.html">here</a>.<p>

    <script type="text/javascript">
      function dflowTest () {
        var funcs = {
              createElement: document.createElement.bind(document),
              appendChild: function (parent, child) { return parent.appendChild(child) },
              'body.appendChild': function (child) { return document.body.appendChild(child) },
              createTextNode: document.createTextNode.bind(document)
            },
            graph = {
              task: {
                arg0: 'arguments[0]',
                arg1: 'arguments[1]',
                createElement: 'createElement',
                createTextNode: 'createTextNode',
                appendChild: 'appendChild',
                'body.appendChild': 'body.appendChild'
              },
              pipe: {
                a: ['arg0', 'createElement'],
                b: ['arg1', 'createTextNode'],
                c: ['createElement', 'appendChild'],
                d: ['createTextNode', 'appendChild', 1],
                e: ['createElement', 'body.appendChild']
              }
            }

        var test = dflow.fun(graph, funcs)

        test('h1', 'dflow test')
        test('p', 'it works!')
      }
    </script>
  </body>
</html>
